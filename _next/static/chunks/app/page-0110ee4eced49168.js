(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2301:(e,t,s)=>{Promise.resolve().then(s.bind(s,9080))},4051:()=>{},9080:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>K});var a=s(5155),n=s(54),i=s.n(n),l=s(2115),r=s(2809);class c{constructor(e,t,s,a){this.rank=e,this.suit=t,this.pointValue=s,this.image=a}}class d{createDeck(){let e=[];for(let t=0;t<this.numberOfDecks;t++)e=e.concat(this.RANKS.flatMap(e=>this.SUITS.map(t=>{let s=this.POINT_VALUES[this.RANKS.indexOf(e)],a="".concat(e,"_of_").concat(t,".png");return new c(e,t,s,a)})));return e}preloadImages(){return Promise.all([...new Set(this.cards.map(e=>"./assets/cards-1.3/".concat(e.image)))].map(e=>new Promise(t=>{let s=new Image;s.src=e,s.onload=t})))}getRandomInt(e,t){let s=new Uint32Array(1);return window.crypto.getRandomValues(s),e+s[0]%(t-e+1)}async casinoShuffle(){return await this.durstenfeldShuffle(),await this.overhandShuffle(),await this.riffleShuffle(),await this.stripShuffle(),await this.cutDeck()}durstenfeldShuffle(){return new Promise(e=>{let t=this.cards,s=t.length;for(let e=s-1;e>0;e--){let s=this.getRandomInt(0,e);[t[e],t[s]]=[t[s],t[e]]}e()})}overhandShuffle(){return new Promise(e=>{let t=[],s=0;for(;this.cards.length>0&&s<100;){let e=this.getRandomInt(1,Math.min(10,this.cards.length)),a=this.cards.splice(0,e);t=50>=this.getRandomInt(1,101)?t.concat(a):a.concat(t),s++}this.cards=t,e()})}riffleShuffle(){return new Promise(e=>{let t=Math.floor(this.cards.length/2),s=this.cards.slice(0,t),a=this.cards.slice(t),n=[];for(;s.length>0&&a.length>0;)50>=this.getRandomInt(1,101)?n.push(s.shift()):n.push(a.shift());this.cards=n.concat(s).concat(a),e()})}stripShuffle(){return new Promise(e=>{let t=this.getRandomInt(0,this.cards.length/2),s=this.getRandomInt(this.cards.length/2,this.cards.length),a=this.cards.slice(0,t),n=this.cards.slice(t,s),i=this.cards.slice(s);this.cards=i.concat(n).concat(a),e()})}cutDeck(){return new Promise(e=>{let t=this.getRandomInt(this.cards.length/4,3*this.cards.length/4),s=this.cards.splice(0,t);this.cards=this.cards.concat(s),e()})}async reshuffle(){let e=.75*this.initialDeckSize;this.dealtCards.length>=e&&(this.loading=!0,this.cards=this.cards.concat(this.dealtCards),this.dealtCards=[],this.casinoShuffle().then(()=>{this.loading=!1}))}getCard(){if(0===this.cards.length)return null;let e=this.cards.pop();return this.dealtCards.push(e),e}constructor(e=6){this.RANKS=["ace","2","3","4","5","6","7","8","9","10","jack","queen","king"],this.SUITS=["spades","hearts","diamonds","clubs"],this.POINT_VALUES=[11,2,3,4,5,6,7,8,9,10,10,10,10],this.numberOfDecks=e,this.loading=!0,this.cards=this.createDeck(),this.dealtCards=[],this.initialDeckSize=this.cards.length,this.preloadImages().then(()=>{this.casinoShuffle().then(()=>{this.loading=!1})})}}function o(e){return new Promise(t=>setTimeout(t,e))}let h=async(e,t,s,a,n,i,l,r)=>{var c,d;let h=n.getCard();e.push(h);let x=1===e.length,f=await p("./assets/cards-1.3/back.png"),w=u("".concat(h.rank,"_").concat(h.suit,"_").concat(e.length),f.src,h.image,"imgSlide");requestAnimationFrame(()=>{m(i,s,l,w)}),await o(400+100*!!x),c=s,d=e,("dealer"!==c||2!==d.length)&&await g(w,h,i,s,l,r)},u=(e,t,s,n)=>(0,a.jsx)("img",{src:t,alt:s,className:n},e),m=(e,t,s,a)=>{e(e=>{let n=[...e];return"dealer"!==t?n[s]=[...n[s],a]:n=[...n,a],n})},g=async(e,t,s,a,n,i)=>{let l="./assets/cards-1.3/".concat(t.image),r=await f(l);x(s,a,n,u(e.key,r,t.image,"imgFlip")),i&&setTimeout(()=>{i()},350),await o(700),x(s,a,n,u(e.key,r,t.image,""))},x=(e,t,s,a)=>{e(e=>{let n=[...e];return"dealer"!==t?n[s]=[...n[s].slice(0,-1),a]:n=[...n.slice(0,-1),a],n})};async function p(e){await w(e);let t=document.createElement("img");return t.src=e,t}async function f(e){return await w(e),e}function w(e){return new Promise(t=>{let s=new Image;s.src=e,s.onload=t})}async function j(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.querySelectorAll("img");if("imgSlide"!==s[s.length-1].className&&!t)return;await Promise.all(Array.from(s).map(e=>new Promise(t=>{e.complete?t():e.onload=t})));let a=window.innerWidth<1e3?window.innerWidth:.5*window.innerWidth,n=s.length,i=0;s.forEach((e,t)=>{let s=window.getComputedStyle(e),a=parseFloat(s.marginLeft)||0,l=parseFloat(s.marginRight)||0;i+=a+l+e.offsetWidth,t===n-3&&(i+=a+l+e.offsetWidth||0)});let l=s[1].offsetWidth,r=window.innerHeight>window.innerWidth?.9:.75,c=-(i-a)/(n-1);c+=parseFloat(window.getComputedStyle(s[1]).marginLeft)||0;let d=Math.max(c=c>0?0:c,-l*r);s.forEach((e,t)=>{0!==t&&(e.style.marginLeft="".concat(d,"px"))})}let y=l.memo(function(e){let{dealersHandElements:t,dealerTotal:s}=e,n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{t.length>2&&n.current&&j(n.current)},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{className:"text-center my-3",children:(0,a.jsxs)("h6",{id:"dealerHeader",children:["Dealer's Cards"," ",t.length>=2&&!t[1].props.src.includes("back.png")?"(Total: ".concat(s,")"):""]})}),(0,a.jsx)(r.A,{fluid:!0,id:"dealersHand",ref:n,children:t})]})});var v=s(6449),S=s(902);let b=e=>{let t=0,s=0;for(let a=0;a<e.length;a++)t+=e[a].pointValue,"ace"===e[a].rank&&s++;for(;t>21&&s>0;)t-=10,s--;return t},k=(e,t,s,a,n,i)=>{var l;if(!e[t]||e[t].length<2)return!1;let r=e[t][0],c=e[t][1],d=i?r.rank===c.rank:r.pointValue===c.pointValue;return 2===e[t].length&&d&&(l=a[t],l<=n)};function A(e,t,s,a,n){return 2===e[t].length&&s<=21&&a[t]<=n}function N(e,t,s){let a=[...t];for(let t=0;t<e.length;t++)a[t]=b(e[t]);return{newTotals:a,newDealerTotal:b(s)}}function C(e){let{hit:t,newGame:s,endHand:n,updateWager:i,playerPoints:c,setPlayerPoints:d,currentWager:o,splitHand:h,currentHand:u,playersHands:m,playerTotals:g,splitCount:x,splitTypeChecked:p,resultsAlertHidden:f,showButtons:w,disableButtons:j,newGameBtnHidden:y,setNewGameBtnHidden:b,isBusy:N,devMode:C,setIsBusy:H}=e,I=(0,l.useCallback)(async()=>{if(H(!0),A(m,u,g[u],o,c)){let e=[...o],s=c-e[u];e[u]*=2,i(e),d(s),await t("player","doubleDown"),await n(),H(!1)}},[H,m,u,g,o,c,i,d,t,n]),P=(0,l.useCallback)(()=>{0===c&&d(100)},[c,d]),B=(0,l.useCallback)(()=>t(),[t]),E=(0,l.useCallback)(()=>h(),[h]),D=(0,l.useCallback)(()=>n(),[n]),R=(0,l.useCallback)(()=>{s(),b(!1)},[s,b]),T=f&&w&&m[u].length>=2&&g[u]<=21,z=T&&k(m,u,x,o,c,p),W=T&&A(m,u,g[u],o,c),F=!f&&m[0].length>0&&c>0,L=!f&&0===c;return(0,a.jsx)(r.A,{className:"d-flex justify-content-center w-100 mt-2",id:"gameActions",children:(0,a.jsxs)(v.A,{children:[(0,a.jsx)(S.A,{onClick:N?void 0:B,hidden:!T,disabled:j,id:"hitBtn",variant:"warning",size:"sm",className:"mx-2",children:"Hit"}),(0,a.jsx)(S.A,{onClick:N?void 0:E,hidden:!z,disabled:j,id:"splitBtn",variant:"primary",size:"sm",className:"mx-2",children:"Split"}),(0,a.jsxs)(S.A,{onClick:N?void 0:I,hidden:!W,disabled:j,id:"doubleDownBtn",variant:"light",size:"sm",className:"mx-2",children:["Double",(0,a.jsx)("br",{}),"Down"]}),(0,a.jsx)(S.A,{onClick:N?void 0:D,hidden:!T,disabled:j,id:"standBtn",variant:"danger",size:"sm",className:"mx-2",children:"Stand"}),(0,a.jsx)(S.A,{onClick:N?void 0:R,hidden:!F&&!C,id:"newGameBtn",variant:"success",size:"sm",className:"mx-auto my-1",children:"New Game"}),(0,a.jsx)(S.A,{onClick:N?void 0:P,hidden:!L,id:"resetPointsBtn",variant:"info",size:"sm",className:"mx-auto my-1",children:"Reset Points"})]})})}var H=s(6160);let I={rE:"1.4.3"},P=JSON.parse('{"t":"main","u":"c1e6062"}');function B(e){let{show:t,handleClose:s,newGame:n,currentWager:i}=e;return(0,a.jsxs)(H.A,{show:t,onHide:s,centered:!0,backdrop:"static",keyboard:!1,children:[(0,a.jsx)(H.A.Header,{className:"bg-primary text-white p-2",children:(0,a.jsxs)(H.A.Title,{className:"mx-auto fw-bold",style:{fontSize:"1.2rem"},children:[(0,a.jsx)(r.A,{className:"text-center",children:"Game Info"}),(0,a.jsxs)(r.A,{className:"text-center",style:{fontSize:"0.7rem"},children:["App Version: ",I.rE,(0,a.jsxs)("p",{className:"mb-0",children:["Branch: ",P.t||"N/A"]})]})]})}),(0,a.jsxs)(H.A.Body,{className:"bg-light text-dark p-2",style:{fontSize:"0.85rem"},children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("h6",{className:"text-center fw-bold",style:{fontSize:"0.9rem"},children:(0,a.jsx)("u",{children:"Disclaimer"})}),(0,a.jsx)("p",{className:"mb-1",children:"By playing, you acknowledge:"}),(0,a.jsxs)("ul",{className:"ps-3 mb-2",children:[(0,a.jsx)("li",{children:"Points are fictional; no monetary value."}),(0,a.jsx)("li",{children:"This game doesn't promote gambling; 18+ only."}),(0,a.jsx)("li",{children:"Play responsibly; don't neglect duties."}),(0,a.jsx)("li",{children:"Rules may change; check regularly."}),(0,a.jsx)("li",{children:"Proceeding means acceptance of terms."})]})]}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h6",{className:"text-center fw-bold",style:{fontSize:"0.9rem"},children:(0,a.jsx)("u",{children:"Blackjack Rules"})}),(0,a.jsxs)("ol",{className:"ps-3 mb-2",children:[(0,a.jsx)("li",{children:"Beat the dealer without exceeding 21."}),(0,a.jsx)("li",{children:"Face cards = 10; Aces = 1 or 11."}),(0,a.jsx)("li",{children:"Start with 2 cards; 1 dealer card hidden."}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Hit:"})," Ask for another card."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Stand:"})," Hold total, end turn."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Bust:"})," (>21) = Loss."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Blackjack:"})," : Ace + 10/Face card."]}),(0,a.jsx)("li",{children:"Dealer hits until 17+; `soft17Switch` affects strategy."})]})]}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h6",{className:"text-center fw-bold",style:{fontSize:"0.9rem"},children:(0,a.jsx)("u",{children:"Button Guide"})}),(0,a.jsxs)("ul",{className:"ps-3 mb-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Hit:"})," Request another card."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Split:"})," Divide same-value cards; double wager."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Double Down:"})," Double wager; one more card."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Stand:"})," End turn"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"New Game:"})," Start next game."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Music:"})," Toggle on/off (default off)."]})]})]})]}),(0,a.jsx)(H.A.Footer,{className:"bg-primary p-2",children:(0,a.jsx)(S.A,{onClick:()=>{s(),setTimeout(()=>{document.getElementById("newGameBtn").hidden&&0===i[0]&&n()},200)},variant:"warning",className:"mx-auto",style:{fontSize:"0.9rem",padding:"0.5rem 1rem"},children:"I Acknowledge and Accept"})})]})}var E=s(4320);let D=l.memo(function(e){let{playersHandElements:t,playerTotals:s,splitCount:n,playersHandNames:i,currentHand:c,carousalInterval:d,setCurrentHand:o}=e,h=(0,l.useRef)([]);return(0,l.useEffect)(()=>{requestAnimationFrame(()=>{t[0].length>2&&t.forEach((e,t)=>{e.length>0&&h.current[t]&&j(h.current[t])})})},[t,i]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(E.A,{activeIndex:c,onSelect:e=>{null!==d&&o(e)},interval:d,controls:!1,indicators:!1,className:"my-3 mx-auto",pause:null,children:t.map((e,t)=>(0,a.jsxs)(E.A.Item,{children:[(0,a.jsx)(r.A,{className:"text-center my-3",children:(0,a.jsxs)("h6",{id:"playerHeader",children:["Player's Hand"," ".concat(n>0?t+1:"")," (Total: ",s[t],")"]})}),(0,a.jsx)("span",{id:"playersHands",children:(0,a.jsx)(r.A,{fluid:!0,id:i[t],ref:e=>h.current[t]=e,children:e},i[t])})]},t))})})}),R=l.memo(function(e){let{playerPoints:t,currentWager:s,currentHand:n}=e;return(0,a.jsxs)(r.A,{className:"mt-2 d-flex justify-content-center",children:[(0,a.jsxs)(r.A,{className:"text-center me-3 mb-2 px-4 border rounded d-flex align-items-center justify-content-center",id:"pointsDisplay",children:["Points*: ",t]}),(0,a.jsxs)(r.A,{className:"text-center ms-3 mb-2 px-2 border rounded d-flex align-items-center justify-content-center wagerDisplay",id:"wagerDisplay-".concat(n),children:["Current Hand's Wager: ",void 0!==s?s:0]})]})});var T=s(9835);function z(e){let{currentWager:t,show:s,handleClose:n,soft17Checked:i,setSoft17Checked:l,splitTypeChecked:c,setSplitTypeChecked:d,autoStandChecked:o,setAutoStandChecked:h,dealersHandElements:u,audioRef:m}=e;return(0,a.jsxs)(H.A,{show:s,onHide:n,centered:!0,children:[(0,a.jsx)(H.A.Header,{closeButton:!0,children:(0,a.jsx)(H.A.Title,{children:"Settings"})}),(0,a.jsxs)(H.A.Body,{children:[(0,a.jsx)("div",{className:"text-center mb-3 text-muted text-decoration-underline",children:(0,a.jsx)("small",{children:"Some Switches Will Be Disabled During a Game"})}),(0,a.jsxs)(T.A,{children:[(0,a.jsx)(T.A.Check,{type:"switch",id:"musicSwitch",label:"Music",onClick:()=>{m&&m.current&&(m.current.paused?m.current.play():m.current.pause())}}),(0,a.jsx)(T.A.Check,{type:"switch",id:"soft17Switch",label:"Dealer Hits on Soft 17",disabled:u.length>0||t[0]>0,checked:i,onChange:()=>l(!i)}),(0,a.jsx)(T.A.Check,{type:"switch",id:"splitSwitch",label:"Split Based on Rank",disabled:u.length>0||t[0]>0,checked:c,onChange:()=>d(!c)})]})]}),(0,a.jsx)(H.A.Footer,{children:(0,a.jsx)(S.A,{variant:"secondary",onClick:n,className:"mx-auto",children:"Close"})}),(0,a.jsxs)(r.A,{className:"text-center pb-2",children:["App Version: ",I.rE," ",(0,a.jsxs)("p",{className:"mb-0",children:["Branch: ",P.t||"N/A"]}),(0,a.jsxs)("p",{children:["Commit: ",P.u||"N/A"]})]})]})}let W=(0,l.forwardRef)(function(e,t){let{showInfoModal:s,showSettingsModal:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.A,{variant:"dark",size:"sm",className:"px-1 py-1 position-absolute top-0 start-0",onClick:s,children:"ℹ️"}),(0,a.jsx)(S.A,{variant:"dark",size:"sm",className:"px-1 py-1 position-absolute top-0 end-0",onClick:n,children:"⚙️"}),(0,a.jsx)("audio",{id:"backgroundMusic",loop:!0,className:"container text-center",ref:t,children:(0,a.jsx)("source",{src:"./assets/casino-funky-background-upbeat-and-uplifting-music-intro-theme-120445.mp3",type:"audio/mpeg"})})]})});var F=s(6896),L=s(9162),V=s(1867),G=s(9107);let M=["1Chip","5Chip","10Chip","20Chip","50Chip"],_=e=>Promise.all(e.map(e=>new Promise(t=>{let s=new Image;s.src="./assets/".concat(e,".jpg"),s.onload=t})));function O(e){let{currentWager:t,updateWager:s,currentHand:n,playerPoints:i,setPlayerPoints:c,initialDeal:d,playersHands:o,showInfo:h,loading:u,isBusy:m}=e,[g,x]=(0,l.useState)(!1);(0,l.useRef)(null);let p=[1,5,10,20,50].map(()=>(0,F.E)());(0,l.useEffect)(()=>{_(M).then(()=>x(!0))},[]);let f=(0,l.useCallback)(e=>{if(m)return;let a=[1,5,10,20,50].indexOf(parseInt(e.target.getAttribute("data-value"),10));-1!==a&&p[a].start({rotateX:[180,0],rotateY:[360,0],transition:{duration:.7,ease:"linear"}});let l=document.getElementById("wagerDisplay-".concat(n));l&&(l.classList.add("highlight"),setTimeout(()=>l.classList.remove("highlight"),500));let r=parseInt(e.target.getAttribute("data-value"),10),c=t[n]+r;c<=i&&Number.isInteger(c)?s(c):c>i&&s(i)},[t,n,i,s,m,p]),w=(0,l.useCallback)(()=>{m||s(0)},[s,m]),j=(0,l.useCallback)(async e=>{if(m)return;let a="allInBtn"===e.target.id,l=!isNaN(t[n])&&t[n]>0&&t[n]<=i,r=0;l||a?(a?s(i):r=i-t[n],c(r),await d(r)):alert("The wager must be a number and greater than 0.")},[t,n,i,c,s,d,m]);return!g||u?(0,a.jsxs)("div",{className:"mt-2 d-flex justify-content-center align-items-center",children:[(0,a.jsx)(V.A,{animation:"border",role:"status",variant:"primary"}),(0,a.jsx)("span",{className:"ms-2",children:"Loading assets..."})]}):(0,a.jsxs)(r.A,{hidden:0!==o[0].length||h,id:"wagerDiv",className:"mt-2",children:[[1,5,10,20,50].map((e,t)=>(0,a.jsx)(L.P.div,{animate:p[t],initial:{rotateX:0,rotateY:0},whileTap:{scale:1.2,rotate:12},whileHover:{scale:1.08},style:{display:"inline-block",margin:"0 4px",perspective:600},children:(0,a.jsx)(G.A,{onClick:m?void 0:f,className:"chip",src:"./assets/".concat(e,"Chip.jpg"),"data-value":e,alt:"".concat(e," point chip"),style:{backfaceVisibility:"visible"}})},e)),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.A,{onClick:m?void 0:w,id:"wagerRst",variant:"danger",size:"sm",className:"align-middle ms-2 my-3",children:"Reset Wager"}),(0,a.jsx)(S.A,{onClick:m?void 0:j,id:"allInBtn",variant:"warning",size:"sm",className:"align-middle ms-2 my-3",children:"Max Wager"}),(0,a.jsx)(S.A,{onClick:m?void 0:j,id:"wagerBtn",variant:"primary",size:"sm",className:"align-middle ms-2 my-3",children:"Place Wager"})]})]})}var q=s(2214);function U(e){let{playersHands:t,playerTotals:s,playerPoints:n,dealerTotal:i,currentWager:c,setPlayerPoints:d,splitCount:o,setCurrentWager:h,resultsAlertHidden:u,currentHand:m}=e,[g,x]=(0,l.useState)([]);return(0,l.useEffect)(()=>{if(!u){let e=n,a=[];for(let n=0;n<t.length;n++){if(0===t[n].length)continue;let l="",r=1;s[n]>21?(l="Player Busted, Dealer Wins",r=0):i>21||s[n]>i?(l=21===s[n]&&2===t[n].length?"Blackjack, Player Wins":i>21?"Dealer Busted, Player Wins":"Player Wins",r=21===s[n]&&2===t[n].length?2.2:2):i>s[n]?(l="Dealer Wins",r=0):l="Push (Tie)",e+=Math.ceil((c[n]*r).toFixed(2)),a.push(o>0?"Hand ".concat(n+1,": ").concat(l):l)}d(e),x(a),h([0])}},[u]),(0,a.jsx)(r.A,{fluid:!0,children:(0,a.jsx)(q.A,{hidden:u,id:"resultsAlert",variant:"info",className:"alert-dismissible fade show mx-auto px-1 py-2 mt-3",role:"alert",children:(0,a.jsx)(r.A,{id:"message",className:"text-center",children:(0,a.jsx)("h6",{className:"my-1",children:g[m]},m)})})})}function K(){let[e,t]=(0,l.useState)(!1),[s,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e="localhost"===window.location.hostname;t(e),n(!e),X(e?1e12:100)},[]);let[c,u]=(0,l.useState)("game"),[m,x]=(0,l.useState)(!1),[p,f]=(0,l.useState)(!0),[w,v]=(0,l.useState)(!0),[S,k]=(0,l.useState)(!1),[A,H]=(0,l.useState)(!1),[I,P]=(0,l.useState)(null),[E,T]=(0,l.useState)(!0),[F,L]=(0,l.useState)([[]]),[V,G]=(0,l.useState)([[]]),[M,_]=(0,l.useState)([]),[q,K]=(0,l.useState)([]),[J,X]=(0,l.useState)(100),[Y,Q]=(0,l.useState)(0),[Z,$]=(0,l.useState)([0]),[ee,et]=(0,l.useState)([0]),[es,ea]=(0,l.useState)(0),[en,ei]=(0,l.useState)(0),[el,er]=(0,l.useState)(["playersHand0"]),[ec,ed]=(0,l.useState)(!0),[eo,eh]=(0,l.useState)(!1),[eu,em]=(0,l.useState)(null),[eg,ex]=(0,l.useState)(0),[ep,ef]=(0,l.useState)(!1),[ew,ej]=(0,l.useState)(!1),ey=(0,l.useRef)(null);(0,l.useEffect)(()=>{document.documentElement.setAttribute("data-bs-theme","dark"),e&&H(!0)},[e]);let ev=async()=>{if(J>0&&!ew){if(ej(!0),ea(0),em(null),ex(e=>e+1),ef(!0),I)I.reshuffle();else{let e=new d(10);P(e),await new Promise(t=>{let s=setInterval(()=>{e.loading||(clearInterval(s),t())},200)})}T(!1),er(["playersHand0"]),L([[]]),_([]),Q(0),$([0]),et([0]),ei(0),G([[]]),K([]),p||f(!0),ej(!1)}},eS=async()=>{ew||(ej(!0),await ek("player","init"),await o(120),await ek("dealer","init"),await o(120),await ek("player","init"),await o(120),await ek("dealer","init"),ej(!1))},eb=e=>{if(ew)return;let t=[...ee];t[es]=parseInt(e,10),et(t)},ek=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:es,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[...F];if((eo||ew)&&"user"===t)return;"user"===t&&ej(!0);let n=!1,i=Z,l=async()=>{if(!n){n=!0;let{newTotals:e,newDealerTotal:t}=N(a,Z,M);return $(e),Q(t),L(a),i=e,{newTotals:e,newDealerTotal:t}}};if("dealer"!==e?await h(a[s],V[s],e,t,I,G,s,l):await h(M,q,e,t,I,K,void 0,l),"dealer"!==e&&"user"===t&&i[s]>21&&(await o(250),await eA()),"dealer"!==e&&"user"===t&&ej(!1),"dealer"!==e)return i[s];let{newTotals:r,newDealerTotal:c}=N(a,Z,M);$(r),Q(c),L(a)},eA=async()=>{if(ej(!0),console.log("endHand"),es===en){let e="./assets/cards-1.3/".concat(M[1].image),t=(0,a.jsx)("img",{src:e,alt:M[1].image},2);await o(220),await g(t,M[1],K,"dealer",-1),await o(250),await eH(),f(!1),em(1750),ej(!1)}else if(es!==en){let e=es+1;await eN(e),ej(!1)}};async function eN(e){ej(!0),es<en&&en>0&&(ea(e),await o(350)),ej(!1)}let eC=async()=>{if(ew)return;ej(!0);let e=en+1,t=[...el,"".concat("playersHand"+e)];ei(e),er(t);let s=[...F,[]],a=[...V,[]],n=[...ee,0];n[e]=n[es],s[e].push(s[es].pop()),a[e].push({...a[es].pop(),key:"1"});let i=[...Z,0],{newTotals:l}=N(s,i,M);$(l),L(s),G(a),et(n),X(J-n[e]),await o(500),await ek("player","split",es,s),ea(e),await o(1200),await ek("player","split",e,s),await o(500),ea(es),({newTotals:l}=N(s,i,M)),$(l),await o(950),21===l[es]&&A?await eA():ej(!1)},eH=async()=>{var e;ej(!0),await o(220);let t=Y;for(;e=t,w?e<17||17===e&&function(e){let t=function(e){let t=0;for(let s=0;s<e.length;s++)"ace"!==e[s].rank&&(t+=e[s].pointValue);return t}(e),s=e.filter(e=>"ace"===e.rank).length;return 6===t&&s>0}(M):e<17;)await ek("dealer","endGame"),Q(t=b(M)),await o(220);ej(!1)};return(0,l.useEffect)(()=>{var e;let t=i().throttle(()=>{requestAnimationFrame(async()=>{V[0].length>2&&V.forEach(async(e,t)=>{e.length>0&&(document.getElementById(el[t]).classList.add("viewportResize"),j(document.getElementById(el[t]),!0),await o(120),document.getElementById(el[t]).classList.remove("viewportResize"))}),q.length>2&&(document.getElementById("dealersHand").classList.add("viewportResize"),j(document.getElementById("dealersHand"),!0),await o(120),document.getElementById("dealersHand").classList.remove("viewportResize"))})},180);return null==(e=window.visualViewport)||e.addEventListener("resize",t),()=>{var e;null==(e=window.visualViewport)||e.removeEventListener("resize",t)}},[V,q]),(0,l.useEffect)(()=>{!async function(){let e=en>0&&F.some(e=>e.length<2);!ew&&A&&21===Z[es]&&null===eu?(ed(!1),await o(750),await eA()):ew?ew&&(Z[es]>21||q.length<2||e?ed(!1):eh(!0)):(ed(!0),eh(!1))}()},[es,en,ew,A,Z,eu]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W,{showInfoModal:()=>n(!0),showSettingsModal:()=>x(!0),ref:ey}),(0,a.jsxs)(r.A,{fluid:!0,className:"my-2",id:"main",children:[(0,a.jsx)(y,{dealersHandElements:q,dealerTotal:Y}),(0,a.jsx)(D,{playersHandElements:V,playerTotals:Z,splitCount:en,playersHandNames:el,currentHand:es,carousalInterval:eu,setCurrentHand:ea},eg),(0,a.jsx)(R,{playerPoints:J,currentWager:ee[es],currentHand:es}),(0,a.jsxs)(r.A,{className:"text-center",id:"bottomDiv",children:[(0,a.jsx)(O,{playerPoints:J,setPlayerPoints:X,currentWager:ee,updateWager:eb,currentHand:es,initialDeal:eS,playersHands:F,showInfo:s,loading:E,isBusy:ew}),(0,a.jsx)(U,{playerPoints:J,setPlayerPoints:X,currentWager:ee,playersHands:F,splitCount:en,playerTotals:Z,dealerTotal:Y,setCurrentWager:et,resultsAlertHidden:p,currentHand:es}),(0,a.jsx)(C,{hit:ek,newGame:ev,endHand:eA,updateWager:eb,playerPoints:J,setPlayerPoints:X,currentWager:ee,splitHand:eC,currentHand:es,playersHands:F,playerTotals:Z,splitCount:en,dealersHandElements:q,splitTypeChecked:S,autoStandChecked:A,resultsAlertHidden:p,showButtons:ec,disableButtons:eo,newGameBtnHidden:ep,setNewGameBtnHidden:ef,isBusy:ew,devMode:e,setIsBusy:ej})]}),(0,a.jsx)(r.A,{className:"text-center mt-3",id:"disclaimer",children:(0,a.jsxs)("p",{className:"small text-muted my-0 px-5",children:[(0,a.jsx)("strong",{children:"* Disclaimer:"})," Points in this game have"," ",(0,a.jsx)("strong",{children:"no monetary value"})," and are for"," ",(0,a.jsx)("strong",{children:"entertainment purposes only"}),"."]})}),e&&(0,a.jsx)("div",{className:"text-center text-warning",children:(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"Developer Mode Enabled"})})}),e&&(0,a.jsxs)("div",{className:"debug-controls mb-2",children:[(0,a.jsx)("label",{htmlFor:"debug-select",className:"me-2 text-light",children:"Debug View:"}),(0,a.jsxs)("select",{id:"debug-select",value:c,onChange:e=>u(e.target.value),className:"form-select form-select-sm w-auto d-inline-block",children:[(0,a.jsx)("option",{value:"game",children:"Game"}),(0,a.jsx)("option",{value:"hands",children:"Hands"}),(0,a.jsx)("option",{value:"settings",children:"Settings"}),(0,a.jsx)("option",{value:"ui",children:"UI State"}),(0,a.jsx)("option",{value:"system",children:"System"})]})]}),e&&(0,a.jsx)("pre",{className:"debug-panel bg-dark text-light p-2 rounded",children:JSON.stringify("game"===c?{playerPoints:J,currentWager:ee,playerTotals:Z,dealerTotal:Y,currentHand:es,splitCount:en}:"hands"===c?{playersHands:F,playersHandElements:V,dealersHand:M,dealersHandElements:q,playersHandNames:el}:"settings"===c?{soft17Checked:w,splitTypeChecked:S,autoStandChecked:A}:"ui"===c?{showInfo:s,showSettings:m,showButtons:ec,resultsAlertHidden:p,newGameBtnHidden:ep,carousalInterval:eu,carouselKey:eg}:{isBusy:ew},null,2)})]}),(0,a.jsx)(z,{currentWager:ee,show:m,handleClose:()=>x(!1),soft17Checked:w,setSoft17Checked:v,autoStandChecked:A,setAutoStandChecked:H,splitTypeChecked:S,setSplitTypeChecked:k,endHand:eA,playerTotals:Z,currentHand:es,splitCount:en,advanceHand:eN,dealersHandElements:q,audioRef:ey}),(0,a.jsx)(B,{newGame:ev,show:s,handleClose:()=>n(!1),currentWager:ee})]})}s(5685),s(4051)}},e=>{var t=t=>e(e.s=t);e.O(0,[740,690,935,137,441,684,358],()=>t(2301)),_N_E=e.O()}]);